/* ==========================================================================
   1. VARIABLES & RESET
   ========================================================================== */
:root {
  /* Colors */
  --bg-color: #05010a;
  --text-primary: #f8fafc;
  --accent-color: #fbbf24;
  --glass-bg: rgba(255, 255, 255, 0.025);
  --glass-border: rgba(255, 255, 255, 0.08);
  
  /* Gradients for "Colorful" request */
  --grad-warm: linear-gradient(135deg, #ff6b6b, #feb47b);
  --grad-vibrant: linear-gradient(135deg, #f093fb, #f5576c);
  --grad-cool: linear-gradient(135deg, #6a11cb, #2575fc);

  /* Typography */
  --font-serif: 'Cormorant Garamond', serif;
  --font-sans: 'Inter', sans-serif;
  --font-mla: "Times New Roman", Times, serif;
}

* { 
  margin: 0; 
  padding: 0; 
  box-sizing: border-box; 
  outline: none; 
  -webkit-tap-highlight-color: transparent; 
}

body, html { 
  width: 100%; 
  height: 100%; 
  background: var(--bg-color); 
  color: var(--text-primary); 
  font-family: var(--font-sans); 
  overflow: hidden; 
  -webkit-font-smoothing: antialiased; 
}

/* ==========================================================================
   2. GLOBAL LAYOUT & UTILITIES
   ========================================================================== */
canvas#ambient-canvas { position: fixed; inset: 0; z-index: -5; pointer-events: none; }
#balloon-container { position: fixed; inset: 0; z-index: -4; pointer-events: none; }

.scene {
  display: none; 
  width: 100%; 
  height: 100vh; 
  position: absolute; 
  top: 0; left: 0;
  opacity: 0; 
  transform: scale(1.05); 
  filter: blur(15px);
  transition: opacity 1.5s ease, transform 1.5s ease, filter 1.5s ease;
  flex-direction: column; 
  align-items: center; 
  justify-content: center;
}

.scene.active { display: flex; }
.scene.visible { opacity: 1; transform: scale(1); filter: blur(0); }

.serif { font-family: var(--font-serif); }
.italic { font-style: italic; }

/* ==========================================================================
   3. COMPONENTS
   ========================================================================== */

/* Vault Mechanism */
.vault-stage { perspective: 2500px; }
.vault-frame { 
  width: 320px; height: 320px; 
  background: #0d0d0f; 
  border: 12px solid #050505; 
  border-radius: 15px; 
  position: relative; 
  box-shadow: 0 50px 100px rgba(0,0,0,0.8); 
}

.vault-door { 
  width: 100%; height: 100%; 
  background: #111; 
  position: absolute; 
  transform-origin: left; 
  transition: 4s cubic-bezier(0.4, 0, 0.2, 1); 
  z-index: 10; 
  border-left: 2px solid #333; 
  display: flex; 
  align-items: center; 
  justify-content: center; 
}

.vault-wheel { 
  width: 140px; height: 140px; 
  border: 10px solid #222; 
  border-radius: 50%; 
  position: relative; 
  transition: 3s ease; 
}

.wheel-spoke { 
  width: 120%; height: 4px; 
  background: #1a1a1a; 
  position: absolute; 
  top: 50%; left: -10%; 
}

/* Story Cards & Narratives */
.story-card {
  max-width: 650px; 
  padding: 4rem; 
  background: var(--glass-bg); 
  backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border); 
  border-radius: 4px; 
  text-align: center; 
  cursor: pointer;
  position: relative;
}

.story-card h2 { 
  font-family: var(--font-serif); 
  font-size: 2.5rem; 
  margin-bottom: 1rem; 
  color: var(--accent-color); 
}

.story-card p { 
  font-size: 1.15rem; 
  line-height: 1.8; 
  margin-bottom: 1.5rem; 
  font-weight: 300; 
  color: rgba(255,255,255,0.9);
}

/* MLA Formatting (Strict 12pt Standard) */
.mla-letter {
  background: #ffffff; 
  color: #000000; 
  padding: 1in; 
  font-family: var(--font-mla);
  font-size: 12pt; 
  line-height: 2.0; 
  text-align: left; 
  width: 100%; 
  max-width: 800px;
  height: 85vh; 
  overflow-y: auto; 
  box-shadow: 0 40px 100px rgba(0,0,0,0.5);
  margin: auto;
}

.mla-header { margin-bottom: 24pt; }
.mla-body { text-indent: 0.5in; }

/* Mosaic & Gallery */
.mood-collage { 
  display: grid; 
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); 
  gap: 1.5rem; 
  width: 100%; 
  max-width: 1400px; 
  padding: 2rem; 
}

.mood-tile { 
  aspect-ratio: 1; 
  border-radius: 4px; 
  overflow: hidden; 
  opacity: 0; 
  transform: translateY(30px); 
  transition: 1s cubic-bezier(0.2, 1, 0.3, 1); 
  cursor: pointer; 
}

.mood-tile.spill-active { opacity: 1; transform: translateY(0); }

.memory-slide { 
  flex: 0 0 70vw; 
  height: 75vh; 
  scroll-snap-align: center; 
  display: flex; 
  flex-direction: column;
  align-items: center; 
  justify-content: center; 
}

.hidden-line { 
  margin-top: 1.5rem; 
  font-family: var(--font-serif); 
  font-style: italic; 
  color: var(--accent-color); 
  font-size: 1.3rem; 
  opacity: 0.8;
}

/* ==========================================================================
   4. ANIMATIONS & EFFECTS
   ========================================================================= */
@keyframes floatUp { 
  from { transform: translateY(10vh) rotate(0deg); opacity: 0; }
  to { transform: translateY(-120vh) rotate(360deg); opacity: 0.6; }
}

.balloon { 
  position: absolute; 
  bottom: -50px; 
  width: 20px; 
  height: 28px; 
  border-radius: 50%; 
  animation: floatUp 18s linear infinite; 
}

/* ==========================================================================
   5. MEDIA QUERIES
   ========================================================================== */
@media (max-width: 768px) {
  .story-card { padding: 2rem; width: 90%; }
  .mla-letter { padding: 0.5in; font-size: 11pt; }
  .memory-slide { flex: 0 0 90vw; }
    }
